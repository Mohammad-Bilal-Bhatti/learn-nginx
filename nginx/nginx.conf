# main context

events {}

# http context
http {

  include mime.types;

  # server context
  server {
    listen 80;
    server_name *.domain.com;

    root /etc/nginx/www/site;
    index index.html index.htm;

    error_page 404 /404.html;

    # exact match block
    location = /secure {
      return 200 "Request server by: $server_name \nYou are visiting [$scheme][$request_method] $uri\n";
    }

    # case in-sensitive match block
    location ~* \.(png|jpg)$ {
      # override inherited root;
      root /etc/nginx/www/media;
      try_files $uri $uri/ =404;
    }

    # location for internal requests
    location /404.html {
      internal;
    }

  }
}